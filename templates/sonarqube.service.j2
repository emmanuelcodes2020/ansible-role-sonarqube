[Unit]
Description=SonarQube service
After=network.target

[Service]
Type=simple
User=sonar
Group=sonar
Environment="JAVA_HOME=/usr/lib/jvm/java-17-amazon-corretto.x86_64"
ExecStart=/bin/bash /opt/sonarqube/sonarqube-{{ sonarqube_version }}/bin/linux-x86-64/sonar.sh start
ExecStop=/bin/bash /opt/sonarqube/sonarqube-{{ sonarqube_version }}/bin/linux-x86-64/sonar.sh stop
Restart=on-failure

[Install]
WantedBy=multi-user.target